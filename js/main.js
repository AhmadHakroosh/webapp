function $(t){return document.querySelector(t)}function all(t){return document.querySelectorAll(t)}function tabbing(){var t=all(".tab-link");setActiveTab(window.location.hash||$(".tab-link").hash);for(var i=0;i<t.length;i++)t[i].addEventListener("click",function(t){setActiveTab(this.hash),setLinksList(),setFrameLink()})}function requestData(){var t=localStorage.getItem("webappData");if(null==t){var i=new XMLHttpRequest;i.open("GET","./data/config.json",!0),i.send(),i.onreadystatechange=function(){4==i.readyState&&200==i.status&&(t=JSON.parse(i.responseText),localStorage.setItem("webappData",JSON.stringify(t)),setNotification(t.notification),setMenus(t.quickActions),initializeTabs(t.tabsList),tabbing(),setLinksList())}}else t=JSON.parse(t),setNotification(t.notification),setMenus(t.quickActions),initializeTabs(t.tabsList),tabbing(),setLinksList()}function saveData(){for(var t=$(".active-tab-item .tab-link").hash,i=[],n=[],e=new RegExp("https?://(?:www.|(?!www))[^s.]+.[^s]{2,}|www.[^s]+.[^s]{2,}",s),a=all(".settings-form .row"),s=0;s<a.length;s++)i=[a[s].children[1].value,a[s].children[3].value],""!=i[0]&&""!=i[1]&&e.test(i[1])&&(n[s]={label:i[0],url:i[1]});var l=localStorage.getItem("webappData");l=JSON.parse(l);for(var s=0;s<l.tabsList.length;s++)if(l.tabsList[s].hash==t)for(var o=0;o<n.length;o++)l.tabsList[s].links.push(n[o]),$(t+" .links").innerHTML+='<li class="link-item"><a href="'+n[o].url+'">'+n[o].label+"</a></li>";localStorage.setItem("webappData",JSON.stringify(l)),setLinksList()}function setLinksList(){var t=$(".active-tab-item .tab-link").hash;$(".links-action-list").innerHTML=$(t+" .links").innerHTML,$(".active-link").innerHTML=$(".links-action-list .link-item").innerHTML;for(var i=all(".links-action-list .link-item"),n=0;n<i.length;n++)i[n].addEventListener("click",function(t){$(".active-link").innerHTML=this.innerHTML,setFrameLink()});setFrameLink(),("#my-folders"==t||"#my-team-folders"==t)&&($(".links-action-list").innerHTML="")}function setActiveTab(t){if(""==t)$(".tab-item").className="active-tab-item";else for(var i=all(".tab-link"),n=0;n<i.length;n++)i[n].hash==t?i[n].parentNode.className="active-tab-item":i[n].parentNode.className="tab-item";"#my-folders"==t||"#my-team-folders"==t?($("#settings").style.display="none",$(".links-list").style.display="none"):($("#settings").style.display="block",$(".links-list").style.display="inline-block")}function setFrameLink(){$(".frame-window").src=$(".active-link a").href,setExpandLink()}function setExpandLink(){$(".expand-icon").href=$(".frame-window").src}function setNotification(t){$(".notifications").innerHTML=t}function setMenus(t){for(var i=all(".nav-section"),n=0;n<i.length;n++)i[n].innerHTML="<p>"+t[n].label+"</p>"+i[n].innerHTML,i[n].style.background="black url(./img/icons/"+t[n].icon+".png) center top 60px no-repeat";for(var e=all(".menu-caption"),n=0;n<e.length;n++)e[n].innerHTML="<p>"+t[n].actionsLabel+"</p>";for(var a=all(".action-list"),n=0;n<a.length;n++){actions=t[n].actions;for(var s=0;s<actions.length;s++)a[n].innerHTML+='<li class="action-list-item"><a href="'+actions[s].url+'">'+actions[s].label+"</a></li>"}}function initializeTabs(t){for(var i=all(".tab-link"),n=0;n<i.length;n++)i[n].innerHTML='<i class="'+t[n].icon+'"></i> '+t[n].label;for(var e,n=0;n<t.length;n++){e=t[n].links;for(var a=0;a<e.length;a++)$(t[n].hash+" .links").innerHTML+='<li class="link-item"><a href="'+e[a].url+'">'+e[a].label+"</a></li>"}}function initialize(){requestData(),$("#form-save").addEventListener("click",function(t){saveData(),$(".settings-form").action=$(".active-tab-item .tab-link").hash}),$(".links-list").addEventListener("click",function(t){$(".links-action-list").classList.toggle("visible"),$(".links-action-list").classList.toggle("hidden")}),$("#settings-icon").addEventListener("click",function(t){1==this.checked?($("#settings").style.background="white",$("#settings").style.boxShadow="5px 5px 5px 0 lightgrey"):($("#settings").style.background="none",$("#settings").style.boxShadow="none")})}window.onLoad=initialize();